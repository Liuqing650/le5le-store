!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("rxjs/Subject"),require("@angular/common")):"function"==typeof define&&define.amd?define(["exports","@angular/core","rxjs/Subject","@angular/common"],t):t(e["le5le-store"]={},e.ng.core,e.Rx,e.ng.common)}(this,function(e,t,r,o){"use strict";var n=this&&this.__decorate||function(e,t,r,o){var n,i=arguments.length,f=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)f=Reflect.decorate(e,t,r,o);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(f=(i<3?n(f):i>3?n(t,r,f):n(t,r))||f);return i>3&&f&&Object.defineProperty(t,r,f),f};e.CookieService=i=function(){function e(){}return e.get=function(e){var t,r=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(t=document.cookie.match(r))?decodeURIComponent(t[2]):""},e.set=function(e,t,r){var o=window,n=o.escape(e)+"="+o.escape(t)+";";if(r||(r={}),r.expires){n+="expires="+new Date((new Date).getTime()+1e3*r.expires*60*60*24).toUTCString()+";"}r.path&&(n+="path="+r.path+";"),r.domain&&(n+="domain="+r.domain+";"),document.cookie=n},e["delete"]=function(e,t){i.get(e)&&(t||(t={}),t.expires=-1,i.set(e,"",t))},e}(),e.CookieService=i=n([t.Injectable()],e.CookieService);var i,f=this&&this.__decorate||function(e,t,r,o){var n,i=arguments.length,f=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)f=Reflect.decorate(e,t,r,o);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(f=(i<3?n(f):i>3?n(t,r,f):n(t,r))||f);return i>3&&f&&Object.defineProperty(t,r,f),f};e.StoreService=function(){function e(){this.memStore={},this.memStore$={}}return e.prototype.find=function(e){if(""===e)return null;var t,r=[];if("."===e?t=this.memStore:(r=e.split("."),t=this.memStore[r[0]]),!t)return null;if(r.length>1){r.splice(0,1);for(var o=0,n=r;o<n.length;o++){if(!(t=t[n[o]]))return null}}return t},e.prototype.find$=function(e,t){if(""===e)return null;var o=this.memStore$[e];if(!o){if(!t)return null;this.memStore$[e]=new r.Subject,o=this.memStore$[e]}return o},e.prototype.get=function(e,t){var r=this.find(e);if(t)for(var o in t)if(this.find(o)!=t[o])return null;return r},e.prototype.get$=function(e){return this.find$(e,!0)},e.prototype.set=function(e,t,r){if(""===e||"."===e)return!1;var o=e.split("."),n=o[0],i=[n],f=this.memStore[n];f||(this.memStore[n]={},f=this.memStore[n]);var c=this.memStore,u=n,l=f;if(o.length>1){o.splice(0,1);for(var a=0,s=o;a<s.length;a++){l[g=s[a]]||(l[g]={}),i.push(i[i.length-1]+"."+g),c=l,u=g,l=l[g]}}if(r)for(var p in r){for(var d=this.memStore,m=0,h=p.split(".");m<h.length;m++){if(!(d=d[g=h[m]]))return!1}if(d!=r[p])return!1}t?c[u]=t:delete c[u];for(var v=0,S=i;v<S.length;v++){var g=S[v],y=this.find$(g);y&&y.next(t)}return!0},e.prototype.setByObservable=function(e,t){var r=this;t.subscribe(function(t){r.set(e,t)})},e}(),e.StoreService=f([t.Injectable()],e.StoreService);var c=this&&this.__decorate||function(e,t,r,o){var n,i=arguments.length,f=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)f=Reflect.decorate(e,t,r,o);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(f=(i<3?n(f):i>3?n(t,r,f):n(t,r))||f);return i>3&&f&&Object.defineProperty(t,r,f),f},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=this&&this.__param||function(e,t){return function(r,o){t(r,o,e)}};e.Le5leStoreModule=a=function(){function e(e){if(e)throw new Error("Le5leStoreModule is already loaded. Import it in the AppModule only")}return e.forRoot=function(){return{ngModule:a,providers:[]}},e}(),e.Le5leStoreModule=a=c([t.NgModule({imports:[o.CommonModule],providers:[e.StoreService]}),l(0,t.Optional()),l(0,t.SkipSelf()),u("design:paramtypes",[e.Le5leStoreModule])],e.Le5leStoreModule);var a;Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=le5le-store.umd.min.js.map
